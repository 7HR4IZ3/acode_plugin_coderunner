/*! For license information please see main.js.LICENSE.txt */
!function(){var e={958:function(e,t,n){var r,o,i,a;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}e=n.nmd(e),a=function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e){return r="function"==typeof Symbol&&"symbol"==c(Symbol.iterator)?function(e){return c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":c(e)},r(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t={innerHTML:t}),function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(Array.isArray(n)&&(o=n,n={}),"function"==typeof e)return e(n,o);if(e instanceof Node)t=e;else{if("string"!=typeof e)throw new Error("Invalid tag, ",r(e));t=document.createElement(e)}var i=n.ref;return delete n.ref,Object.keys(n).forEach((function(e){var r=n[e];if(void 0!==r)switch(e){case"child":a(t,[r]);break;case"children":if(!Array.isArray(r))throw new Error("children must be an array of Nodes");a(t,r.flat());break;case"attr":Object.keys(r).forEach((function(e){var n=r[e];void 0!==n&&t.setAttribute(e,n)}));break;case"style":case"dataset":Object.keys(r).forEach((function(n){var o=r[n];void 0!==o&&(t[e][n]=o)}));break;case"on":Object.keys(r).forEach((function(e){var n=r[e];void 0!==n&&n.forEach((function(n){t.addEventListener(e,n)}))}));break;default:t[e]=r}})),i&&i.instanceOfRef&&(i.el=t),t}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])}function a(e,t){var n,c=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}(t);try{for(c.s();!(n=c.n()).done;){var u=n.value;if(Array.isArray(u))a(e,u.flat());else{if(u instanceof Node)u instanceof Text&&"clone"in u&&(u=u.clone());else{var s=r(u);if(!["number","bigint","string"].includes(s))continue;if("string"===s&&!u)continue;u=i.text("".concat(u))}e.appendChild(u)}}}catch(e){c.e(e)}finally{c.f()}}return e.d(t,{default:function(){return i}}),window&&!window.tag&&(window.tag=i),Object.defineProperties(i,{get:{value:function(e){return document.querySelector(e)}},getAll:{value:function(e){return function(e){if(Array.isArray(e))return n(e)}(t=document.querySelectorAll(e))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t}},text:{value:function(e){return document.createTextNode(e)}},use:{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createTextNode(e);return t.clones=[t],t.shouldClone=!1,t._value=e,Object.defineProperty(t,"value",{set:function(e){t._value=e,t.clones.forEach((function(t){t.textContent=e})),"function"==typeof t.onChange&&t.onChange.call(t,e)},get:function(){return t._value}}),Object.defineProperty(t,"toString",{value:function(){return t._value}}),Object.defineProperty(t,"clone",{value:function(){if(!t.shouldClone)return t.shouldClone=!0,t;var e=t.cloneNode();return t.clones.push(e),e}}),t}}}),t.default}()},"object"==c(t)&&"object"==c(e)?e.exports=a():(o=[],void 0===(i="function"==typeof(r=a)?r.apply(t,o):r)||(e.exports=i))},111:function(e,t,n){var r=n(280).default;function o(){"use strict";e.exports=o=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},i=Object.prototype,a=i.hasOwnProperty,c=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof x?t:x,i=Object.create(o.prototype),a=new F(r||[]);return c(i,"_invoke",{value:C(e,n,a)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=p;var m="suspendedStart",y="suspendedYield",v="executing",b="completed",g={};function x(){}function k(){}function w(){}var S={};d(S,s,(function(){return this}));var j=Object.getPrototypeOf,A=j&&j(j(M([])));A&&A!==i&&a.call(A,s)&&(S=A);var E=w.prototype=x.prototype=Object.create(S);function O(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,i,c,u){var s=h(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,u)}),(function(e){n("throw",e,c,u)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,u)}))}u(s.arg)}var o;c(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}})}function C(e,n,r){var o=m;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===b){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=$(c,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var s=h(e,n,r);if("normal"===s.type){if(o=r.done?b:y,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=b,r.method="throw",r.arg=s.arg)}}}function $(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,$(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(a.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(r(e)+" is not iterable")}return k.prototype=w,c(E,"constructor",{value:w,configurable:!0}),c(w,"constructor",{value:k,configurable:!0}),k.displayName=d(w,f,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,d(e,f,"GeneratorFunction")),e.prototype=Object.create(E),e},n.awrap=function(e){return{__await:e}},O(_.prototype),d(_.prototype,l,(function(){return this})),n.AsyncIterator=_,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new _(p(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(E),d(E,f,"Generator"),d(E,s,(function(){return this})),d(E,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=M,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;R(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},n}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},280:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},666:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o=n(111)();e.exports=o;try{regeneratorRuntime=o}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e=n(958),t=n.n(e);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function u(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,c,"next",e)}function c(e){u(i,r,o,a,c,"throw",e)}a(void 0)}))}}var l=n(666),f=n.n(l),d=JSON.parse('{"id":"acode.coderunner.plugin"}');function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n){y(e,t),t.set(e,n)}function y(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(e,t){return e.get(g(e,t))}function b(e,t,n){return e.set(g(e,t),n),n}function g(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var x=acode.require("url"),k=acode.require("fsoperation"),w=acode.require("helpers"),S=acode.require("settings"),j=acode.require("EditorFile"),A=acode.require("openFolder"),E=acode.require("multiPrompt");function O(e){return e.startsWith("content://com.termux.documents/tree")?(e=e.split("::")[1]).replace(/^\/data\/data\/com\.termux\/files\/home/,"$HOME"):e.startsWith("file:///storage/emulated/0/")?"/sdcard"+e.substr(26).replace(/\.[^/.]+$/,"").split("/").join("/")+"/":!!e.startsWith("content://com.android.externalstorage.documents/tree/primary")&&"/sdcard/"+(e=e.split("::primary:")[1])}function _(e){return A.find(e.uri)}function C(e,t){var n,r;return e.isTerminalOpened()||null!==(n=e.newTerminal)&&void 0!==n&&n.call(e)||null===(r=e.openTerminal)||void 0===r||r.call(e),e.isMinimized()&&e.maximiseTerminal(),e.execute(t)}function $(e,t){return L.apply(this,arguments)}function L(){return(L=s(f().mark((function e(t,n){var r,o,i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.newTerminal({backend:"termux"});case 2:return o=e.sent,this.$runBtn.replaceWith(this.$stopBtn),this.$stopBtn.onclick=function(){o.backend.close()},o.backend.onclose=function(){i.$stopBtn.replaceWith(i.$runBtn)},null===(r=t.show)||void 0===r||r.call(t),e.abrupt("return",o.execute(n));case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var R=new WeakMap,F=new WeakMap,M=new WeakMap,P=new WeakMap,T=new WeakSet,N=function(){return e=function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,t=T),t.add(this),m(this,R,null),m(this,F,void 0),m(this,M,void 0),m(this,P,[{name:"Built In Runner",icon:"play_arrow",project:!0,match:function(e){return e.canRun()},handler:function(e,t){return t.contextMenu?e.runFile():e.run()}}])},n=[{key:"init",value:(E=s(f().mark((function e(n,r,o,i){var a,c,u,l,p=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=this,b(M,this,x.join(PLUGIN_DIR,d.id,"commands.json")),e.next=4,k(v(M,this)).exists();case 4:if(e.sent){e.next=18;break}return e.next=7,k(x.dirname(v(M,this))).createFile("commands.json");case 7:if(!(l=this.settings.commands)){e.next=12;break}return e.next=10,k(v(M,this)).writeFile(JSON.stringify(l),"utf-8");case 10:e.next=18;break;case 12:return e.t0=k(v(M,this)),e.next=15,k(PLUGIN_DIR,d.id,"default_commands.json").readFile("utf-8");case 15:return e.t1=e.sent,e.next=18,e.t0.writeFile.call(e.t0,e.t1,"utf-8");case 18:return e.t2=b,e.t3=F,e.t4=this,e.t5=JSON,e.next=24,k(v(M,this)).readFile("utf-8");case 24:if(e.t6=e.sent,e.t6){e.next=27;break}e.t6="[]";case 27:e.t7=e.t6,e.t8=e.t5.parse.call(e.t5,e.t7),(0,e.t2)(e.t3,e.t4,e.t8),v(P,this).push({name:"NPM",icon:"file file_type_javascript",project:!0,match:function(e){return s(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("package.json"!=e.name){t.next=2;break}return t.abrupt("return",!0);case 2:if(n=_(e)){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,k(x.join(n.url,"package.json"));case 7:return r=t.sent,t.next=10,r.exists();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})))()},handler:function(e,t){return s(f().mark((function n(){var r,o,i,a,c,s,l;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.execute,o=[["installScript","install"]],"package.json"!=e.name){n.next=6;break}a=JSON.parse(e.session.getValue()||"{}"),n.next=21;break;case 6:return c=_(e),n.next=9,acode.fsOperation(x.join(c.url,"package.json"));case 9:return s=n.sent,n.next=12,s.exists();case 12:if(!n.sent){n.next=20;break}return n.t0=JSON,n.next=16,s.readFile("utf-8");case 16:n.t1=n.sent,a=n.t0.parse.call(n.t0,n.t1),n.next=21;break;case 20:return n.abrupt("return");case 21:for(l in a.scripts||{})o.push([l,l]);if(!(o.length>0)){n.next=28;break}return n.next=25,acode.select("Select script",o);case 25:i=n.sent,n.next=31;break;case 28:return n.next=30,acode.prompt("Script name","start");case 30:i=n.sent;case 31:if(!i){n.next=47;break}if("installScript"!=i){n.next=40;break}return n.t2=r,n.next=36,g(T,u,I).call(u,"npm install",e,!1);case 36:return n.t3=n.sent,n.next=39,(0,n.t2)(n.t3);case 39:return n.abrupt("return",n.sent);case 40:return n.t4=r,n.next=43,g(T,u,I).call(u,"npm run ".concat(i),e,!1);case 43:return n.t5=n.sent,n.next=46,(0,n.t4)(n.t5);case 46:return n.abrupt("return",n.sent);case 47:case"end":return n.stop()}}),n)})))()}}),v(P,this).push({name:"Edit commands.json",icon:"file file_type_json",match:function(e){return!0},handler:function(){new j(x.basename(v(M,p)),{uri:v(M,p)})},project:!0}),v(P,this).push({name:"Django",icon:"file file_type_python",project:!0,match:function(e){return s(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=_(e)){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,acode.fsOperation(x.join(n.url,"manage.py"));case 5:return r=t.sent,t.next=8,r.exists();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))()},handler:function(e,t){return s(f().mark((function n(){var r,o,i,a,c;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.execute,o=_(e),i=O(o.url),a=[["runserver","Run Server","play_arrow"],["migrate","Migrate"],["makemigrations","Make Migrations"],["shell","Shell"],["other","Enter Command","edit"]],n.next=6,acode.select("Select Django Command",a);case 6:if(c=n.sent){n.next=11;break}return n.abrupt("return");case 11:if("other"!=c){n.next=15;break}return n.next=14,acode.prompt("Enter command");case 14:c=n.sent;case 15:return n.t0=r,n.next=18,g(T,u,I).call(u,'cd "'.concat(i,'"; python manage.py ').concat(c),e,!1);case 18:return n.t1=n.sent,n.next=21,(0,n.t0)(n.t1);case 21:return n.abrupt("return",n.sent);case 22:case"end":return n.stop()}}),n)})))()}}),null===(a=app.get("#coderunner-run"))||void 0===a||a.remove(),null===(c=app.get("#coderunner-stop"))||void 0===c||c.remove(),this.$runBtn=t()("span",{className:"icon play_circle_filled",id:"coderunner-run",attr:{action:"run"},title:"Run using code runner",onclick:this.run.bind(this),oncontextmenu:function(e){p.run(e,!0)}}),this.$stopBtn=t()("span",{className:"icon pause_circle_filled",id:"coderunner-stop",attr:{action:"run"},title:"Stop running.",onclick:this.stop.bind(this)}),this.$func=this.checkRunnable.bind(this),this.checkRunnable(),editorManager.on("switch-file",this.$func),editorManager.on("rename-file",this.$func),editorManager.editor.commands.addCommand({name:"code.runner:run",description:"Run Code",bindKey:{win:"Ctrl-R"},exec:function(){return p.run(!1)}}),editorManager.editor.commands.addCommand({name:"code.runner:run_file",description:"Run File",bindKey:{win:"Ctrl-Shift-R"},exec:function(){return p.run(!0)}}),acode.define("code.runner",{run:this.run.bind(this),stop:this.stop.bind(this),getDirectoryForFile:_,addHandler:this.addHandler.bind(this),removeHandler:this.removeHandler.bind(this)});case 44:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return E.apply(this,arguments)})},{key:"logger",get:function(){if(v(R,this))return v(R,this);var e=acode.require("acode.sdk.logger");return e?(b(R,this,e("acode.coderunner.plugin")),v(R,this)):null}},{key:"commands",get:function(){var e=this.settings.commands||v(F,this);if("string"==typeof e)try{e=JSON.parse(e)}catch(e){throw acode.alert("Invalid command config"),e}return this.settings.projectsRunnable?[].concat(o(e),o(v(P,this))):[].concat(o(e),[v(P,this)[0]])}},{key:"getHandler",value:(A=s(f().mark((function e(t){var n,r,o,i,a,c,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!(u.length>1&&void 0!==u[1])||u[1],r=this.getFileExtension(t.name),o=[],i=p(this.commands),e.prev=4,i.s();case 6:if((a=i.n()).done){e.next=35;break}if(!(c=a.value).extension||c.extension!=r){e.next=16;break}if(!n){e.next=13;break}return e.abrupt("return",c);case 13:o.push(c);case 14:e.next=33;break;case 16:if(!c.match){e.next=33;break}if("function"!=typeof c.match){e.next=26;break}return e.next=20,c.match(t);case 20:if(!e.sent){e.next=26;break}if(!n){e.next=25;break}return e.abrupt("return",c);case 25:o.push(c);case 26:if(!new RegExp(c.match).exec(t.name)){e.next=33;break}if(!n){e.next=32;break}return e.abrupt("return",c);case 32:o.push(c);case 33:e.next=6;break;case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(4),i.e(e.t0);case 40:return e.prev=40,i.f(),e.finish(40);case 43:return e.abrupt("return",o);case 44:case"end":return e.stop()}}),e,this,[[4,37,40,43]])}))),function(e){return A.apply(this,arguments)})},{key:"ensureCd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$dir";return this.settings.changeDirectory?e:'cd "'.concat(t,'"; ').concat(e)}},{key:"run",value:(h=s(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.runCode(n);case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"runCode",value:(l=s(f().mark((function e(t){var n,r,o,i,a,c,u,l=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=editorManager.activeFile,e.next=3,this.getHandler(n,!1);case 3:if(i=e.sent,a=function(){var e=s(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return l.logger&&l.logger.debug("Running: "+t),e.prev=2,e.next=5,l.execute(t);case 5:l.logger&&l.logger.debug("Done. Exited with code=0"),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),l.logger&&l.logger.error('Failed to run "'.concat(n.name,'" : ').concat(String(e.t0))),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),t||!(c=i.find((function(e){return e.default})))){e.next=9;break}r=c,e.next=26;break;case 9:if(!(i.length>1||1==i.length&&i[0].project)){e.next=21;break}return i.push({name:"Configure Default",icon:"settings",project:!0,handler:function(){var e=s(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.filter((function(e){return!e.project})),t.push({name:"Remove Default",icon:"settings"}),e.next=4,acode.select("Select Default",t.map((function(e,t){var n=e.extension?w.getIconForFile("file."+e.extension):"play_arrow";return[e,(e.name||e.extension)+(e.default?" (Default)":""),e.icon?e.icon:n]})));case 4:if(!(n=e.sent)){e.next=10;break}return t.map((function(e){e.default&&(e.default=!1)})),n.default=!0,e.next=10,k(v(M,l)).writeFile(JSON.stringify(v(F,l)),"utf-8");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.next=13,acode.select("Run Using",i.map((function(e,t){var n=e.extension?w.getIconForFile("file."+e.extension):"play_arrow";return[t,(e.name||e.extension)+(e.default?" (Default)":""),e.icon?e.icon:n]})));case 13:if(void 0!==(u=e.sent)){e.next=18;break}return e.abrupt("return");case 18:r=i[u];case 19:e.next=26;break;case 21:if(1!=i.length){e.next=25;break}r=i[0],e.next=26;break;case 25:return e.abrupt("return");case 26:if(!(o=r.command)){e.next=40;break}if(!this.settings.commandEdit){e.next=33;break}return e.next=30,g(T,this,I).call(this,o,n);case 30:o=e.sent,e.next=34;break;case 33:o=this.formatCommand(o,n);case 34:if(e.t0=o,!e.t0){e.next=38;break}return e.next=38,a(o);case 38:e.next=43;break;case 40:if(!r.handler){e.next=43;break}return e.next=43,r.handler(n,{contextMenu:t,execute:a});case 43:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"stop",value:function(){this.$stopBtn.remove(),this.execute("^C"),this.logger&&this.logger.debug("Done. Exited with code=1")}},{key:"execute",value:(u=s(f().mark((function e(t){var n,r,o,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=acode.require("acodex"),console.log(n,acode.require("acode.terminal"),this.settings.runLibrary),"AcodeX"!=this.settings.runLibrary||!n){e.next=7;break}return e.next=5,C(n,t);case 5:case 11:case 19:e.next=25;break;case 7:if(!(r=acode.require("acode.terminal"))){e.next=13;break}return"AcodeX"==this.settings.runAcodeTerminal&&(o="AcodeX unavailable falling back to Acode Terminal.",this.logger&&this.logger.debug(o),console.info(o)),e.next=11,$.bind(this)(r,t);case 13:if(!n){e.next=21;break}return i="AcodeX available falling back to AcodeX.",this.logger&&this.logger.debug(i),console.info(i),e.next=19,C(n,t);case 21:return a="AcodeX or Acode Terminal plugin required to use Coderunner.\n Please install first.",this.logger&&this.logger.error(a),acode.alert("Coderunner Error",a),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"destroy",value:function(){this.$runBtn&&(this.$runBtn.onclick=null,this.$runBtn.remove(),this.$stopBtn.remove()),editorManager.off("switch-file",this.$func),editorManager.off("rename-file",this.$func),editorManager.editor.commands.removeCommand("code.runner:run_code")}},{key:"checkRunnable",value:(a=s(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=editorManager.activeFile,this.$runBtn.isConnected?this.$runBtn.remove():this.$stopBtn.isConnected&&this.$stopBtn.remove(),this.checkFileRunnable(t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"checkFileRunnable",value:(i=s(f().mark((function e(t){var n,r,o,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHandler(t);case 2:n=e.sent,r=this.$runBtn,n?(o=root.get("header"),this.settings.replaceRunBtn&&(i=setInterval((function(){var e=o.get('.icon.play_arrow[action="run"]');e&&(e.remove(),clearInterval(i),o.insertBefore(r,o.lastChild))}),10)),o.insertBefore(r,o.lastChild)):r.remove();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"checkProjectRunnable",value:(r=s(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"getFileExtension",value:function(e){return String(e).split(".").at(-1)}},{key:"formatCommand",value:function(e,t,n){if(e){var r=t.name.split(".");r.pop();var o=r.join("."),i=O(t.uri),a=i.split("/");a.pop();var c=a.join("/")+"/",u=_(t);return e.replaceAll("$nameNoExt",o).replaceAll("$dirNoSlash",c.slice(0,c.length-1)).replaceAll("$workspaceUrl",null==u?void 0:u.url).replaceAll("$workspace",null==u?void 0:u.url.split("::")[1]).replaceAll("$name",t.name).replaceAll("$dir",c).replaceAll("$uri",i)}}},{key:"addHandler",value:function(e){v(P,this).push(e)}},{key:"removeHandler",value:function(e){b(P,this,v(P,this).filter((function(t){return t.name===e})))}},{key:"initialSettings",value:function(){return{changeDirectory:!0,replaceRunBtn:!0,projectsRunnable:!0,commandEdit:!0,runLibrary:"AcodeX"}}},{key:"remakeOldsettings",value:function(){var e=this,t=this.settings.commands;if(t&&Array.isArray(t[0])){var n=[];t.forEach((function(t){var r;n.push({extension:t[0],command:t[1],name:(null===(r=v(F,e).find((function(e){e.extension,t[0]})))||void 0===r?void 0:r.name)||t[0]})})),b(F,this,n)}}},{key:"format",value:function(e){var t=ace.require("ace/ext/beautify").beautify,n=JSON.stringify(e),r=ace.createEditSession("");return r.setValue(n),r.setMode("json"),t(r),r.getValue()}},{key:"settingsObj",get:function(){var e=this,t=this.settings;return t.commands||v(F,this),{list:[{index:0,key:"changeDirectory",text:"Change Directory",info:"Change the current directory before running.",checkbox:t.changeDirectory},{index:1,key:"runLibrary",text:"Terminal Library",value:"AcodeX",info:"Acode library to use to execute commands.",select:["AcodeX","Acode Terminal"]},{index:3,key:"replaceRunBtn",text:"Replace Run Button",info:"Replace the default run button",checkbox:t.replaceRunBtn},{index:4,key:"projectsRunnable",text:"Run Projects",info:"Display option to run projects.",checkbox:t.projectsRunnable},{index:5,key:"commandEdit",text:"Enable Command Edit Box",info:"Whether to display prompt to edit command before running.",checkbox:t.commandEdit}],cb:function(t,n){e.settings[t]=n,S.update()}}}},{key:"settings",get:function(){var e=S.value["acode.coderunner.plugin"];return e||(e=S.value["acode.coderunner.plugin"]=this.initialSettings(),S.update()),e}}],n&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r,i,a,u,l,h,A,E}();function I(e,t,n){return B.apply(this,arguments)}function B(){return(B=s(f().mark((function e(t,n,r){var o,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){var e=app.get("#sourceCmd"),t=e.value;if(t){var r;t=t.trim();var i=app.get("#handler");if(null===(r=app.get("#changeDir"))||void 0===r?void 0:r.checked){if(t.startsWith('cd "$dir"; '))return;i.setAttribute("value",i.value=o.formatCommand('cd "$dir"; '+t,n))}else i.setAttribute("value",i.value=o.formatCommand(e.value=t.replace('cd "$dir"; ',""),n))}},o=this,(r=void 0!==r?r:this.settings.changeDirectory)&&(t='cd "$dir"; '+t),e.next=7,E("Run Code",[{id:"sourceCmd",value:t,onchange:i},{id:"handler",placeholder:"Handler",value:this.formatCommand(t,n)},[{id:"changeDir",type:"checkbox",placeholder:"Change Directory",onchange:i,value:r}]]);case 7:return a=e.sent,e.abrupt("return",a.handler);case 9:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}if(window.acode){var D=new N;acode.setPluginInit(d.id,function(){var e=s(f().mark((function e(t,n,r){var o,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.cacheFileUrl,i=r.cacheFile,r.firstInit,t.endsWith("/")||(t+="/"),D.baseUrl=t,e.next=5,D.init(n,i,o);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),D.settingsObj),acode.setPluginUnmount(d.id,(function(){D.destroy()}))}}()}();